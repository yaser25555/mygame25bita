<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; connect-src 'self' https://mygame25bita-7eqw.onrender.com https://mygame25bita-1-4ue6.onrender.com wss: ws:; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data:;">
  <title>ููุญุฉ ุชุญูู ุงููุณุคูู - Voice Boom</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="admin-styles.css">
</head>
<body>
  <div class="container">
    <h2>ููุญุฉ ุชุญูู ุงููุณุคูู</h2>

    <!-- Admin Login Form -->
    <form id="adminLoginForm" class="login-form">
      <h3>ุชุณุฌูู ุฏุฎูู ุงููุณุคูู</h3>
      <div class="field">
        <label for="adminUsername">ุงุณู ุงููุณุชุฎุฏู:</label>
        <input type="text" id="adminUsername" placeholder="ุงุณู ุงููุณุชุฎุฏู" required autocomplete="username">
      </div>
      <div class="field">
        <label for="adminPassword">ูููุฉ ุงููุฑูุฑ:</label>
        <input type="password" id="adminPassword" placeholder="ูููุฉ ุงููุฑูุฑ" required autocomplete="current-password">
      </div>
      <button type="submit" id="adminLoginBtn">ุชุณุฌูู ุงูุฏุฎูู</button>
      <p id="loginMessage" style="color: red;"></p>
    </form>

    <!-- Admin Panel Content (initially hidden) -->
    <div id="adminPanel" class="hidden">
      <div class="admin-panel-sections">
        <button id="showGameManagement">ุฅุฏุงุฑุฉ ุงููุนุจุฉ</button>
        <button id="showUserManagement">ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู</button>
        <button id="showSuspiciousActivity">ูุฑุงูุจุฉ ุงููุดุงุทุงุช ุงููุดุจููุฉ</button>
        <button id="showUserIdsManagement">ุฅุฏุงุฑุฉ ูุนุฑูุงุช ุงููุณุชุฎุฏููู</button>
        <button id="showUserImagesManagement">ุฅุฏุงุฑุฉ ุตูุฑ ุงููุณุชุฎุฏููู</button>
      </div>

      <!-- Game Management Section -->
      <div id="gameManagementSection" class="section-content hidden">
        <h3>ุฅุนุฏุงุฏุงุช ุงููุนุจุฉ</h3>
        <div class="field">
            <label for="numBoxesInput">ุนุฏุฏ ุงูุตูุงุฏูู ูู ุงูุฌููุฉ:</label>
            <input type="number" id="numBoxesInput" min="5" max="100">
        </div>
        <div class="field">
            <label for="winRatioInput">ูุณุจุฉ ุงูููุฒ (ูู 0.1 ุฅูู 0.9):</label>
            <input type="number" id="winRatioInput" step="0.1" min="0.1" max="0.9">
        </div>
        <button id="saveGameSettingsBtn">ุญูุธ ุฅุนุฏุงุฏุงุช ุงููุนุจุฉ</button>
      </div>

      <!-- User Management Section -->
      <div id="userManagementSection" class="section-content hidden">
        <h3>ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู</h3>
        <input type="text" id="searchUsername" placeholder="ุฃุฏุฎู ุงุณู ุงููุณุชุฎุฏู ููุจุญุซ">
        <button id="fetchUserDataBtn">๐ ุนุฑุถ ุจูุงูุงุช ุงููุณุชุฎุฏู</button>

        <form id="editUserForm" class="hidden">
          <input type="hidden" id="currentUsername">
          <div class="field">
            <label for="editUsername">ุงุณู ุงููุณุชุฎุฏู:</label>
            <input type="text" id="editUsername" placeholder="ุงุณู ุงููุณุชุฎุฏู" autocomplete="username">
          </div>
          <div class="field">
            <label for="editPassword">ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ (ุงุชุฑูู ูุงุฑุบูุง ูุนุฏู ุงูุชุบููุฑ):</label>
            <input type="password" id="editPassword" placeholder="ูููุฉ ูุฑูุฑ ุฌุฏูุฏุฉ" autocomplete="new-password">
          </div>
          <div class="field">
            <label for="manageCoins">ุงูุฑุตูุฏ ุงูุญุงูู:</label>
            <input type="number" id="manageCoins" placeholder="ุงูุฑุตูุฏ">
          </div>
          <div class="field">
            <label for="managePearls">ุนุฏุฏ ุงููุขูุฆ:</label>
            <input type="number" id="managePearls" placeholder="ุนุฏุฏ ุงููุขูุฆ" min="0">
          </div>
          <button type="submit" id="updateUserBtn">ุชุญุฏูุซ ุจูุงูุงุช ุงููุณุชุฎุฏู</button>
        </form>
          <hr style="margin: 20px 0; border-color: #444;">
          <div class="field">
            <label for="adminRoleUsername">ุชุนููู ููุณุคูู:</label>
            <input type="text" id="adminRoleUsername" readonly>
          </div>
          <button id="assignAdminRoleBtn">ุชุนููู ูุดุฑู</button>
      </div>

      <!-- User IDs Management Section -->
      <div id="userIdsManagementSection" class="section-content hidden">
        <h3>๐ ุฅุฏุงุฑุฉ ูุนุฑูุงุช ุงููุณุชุฎุฏููู</h3>
        
        <!-- ุงูุจุญุซ ุนู ุงููุณุชุฎุฏู -->
        <div class="search-section">
          <h4>ุงูุจุญุซ ุนู ุงููุณุชุฎุฏู</h4>
          <div class="field">
            <label for="searchUserIdUsername">ุงุณู ุงููุณุชุฎุฏู:</label>
            <input type="text" id="searchUserIdUsername" placeholder="ุฃุฏุฎู ุงุณู ุงููุณุชุฎุฏู">
          </div>
          <button id="searchUserBtn">๐ ุงูุจุญุซ</button>
        </div>

        <!-- ุนุฑุถ ุจูุงูุงุช ุงููุณุชุฎุฏู -->
        <div id="userDataDisplay" class="hidden">
          <h4>ุจูุงูุงุช ุงููุณุชุฎุฏู</h4>
          <div class="user-info">
            <p><strong>ุงุณู ุงููุณุชุฎุฏู:</strong> <span id="displayUsername"></span></p>
            <p><strong>ุงููุนุฑู ุงูุญุงูู:</strong> <span id="displayCurrentUserId"></span></p>
            <p><strong>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู:</strong> <span id="displayEmail"></span></p>
          </div>
          
          <!-- ุชุบููุฑ ุงููุนุฑู -->
          <div class="change-user-id-section">
            <h4>ุชุบููุฑ ูุนุฑู ุงููุณุชุฎุฏู</h4>
            <div class="field">
              <label for="newUserId">ุงููุนุฑู ุงูุฌุฏูุฏ:</label>
              <input type="number" id="newUserId" placeholder="ุฃุฏุฎู ุงููุนุฑู ุงูุฌุฏูุฏ" min="1">
            </div>
            <button id="updateUserIdBtn" style="background: #f59e0b;">๐ ุชุญุฏูุซ ุงููุนุฑู</button>
            <p id="updateUserIdMessage" style="margin-top: 10px;"></p>
          </div>
        </div>

        <!-- ูุงุฆูุฉ ุงููุณุชุฎุฏููู -->
        <div class="users-list-section">
          <h4>ูุงุฆูุฉ ุงููุณุชุฎุฏููู</h4>
          <button id="loadAllUsersBtn" style="background: #10b981;">๐ ุชุญููู ุฌููุน ุงููุณุชุฎุฏููู</button>
          <div id="usersList" style="margin-top: 15px; max-height: 400px; overflow-y: auto;">
            <!-- ุณูุชู ููุคูุง ุจุงูุฌุงูุงุณูุฑูุจุช -->
          </div>
        </div>
      </div>

      <!-- Suspicious Activity Monitoring Section -->
      <div id="suspiciousActivitySection" class="section-content hidden">
        <h3>๐ ูุฑุงูุจุฉ ุงููุดุงุทุงุช ุงููุดุจููุฉ</h3>
        <div class="stats-summary">
          <div class="stat-card">
            <span class="stat-number" id="totalSuspiciousUsers">0</span>
            <span class="stat-label">ูุณุชุฎุฏููู ูุดุจูููู</span>
          </div>
          <div class="stat-card">
            <span class="stat-number" id="highRiskUsers">0</span>
            <span class="stat-label">ูุฎุงุทุฑ ุนุงููุฉ</span>
          </div>
        </div>
        
        <button id="refreshSuspiciousActivityBtn" style="background: #10b981; margin: 10px 0;">๐ ุชุญุฏูุซ ุงูุจูุงูุงุช</button>
        
        <div id="suspiciousUsersList" style="margin-top: 20px;">
          <!-- ุณูุชู ููุคูุง ุจุงูุฌุงูุงุณูุฑูุจุช -->
        </div>
      </div>
    </div>

    <!-- ูุซุงู: ูุงุฆูุฉ ุงููุณุชุฎุฏููู ุงููุชุตููู ุจุงูุตูุช -->
    <ul id="voiceUsersList"></ul>

  </div>

  <script src="admin.js"></script>
</body>
</html>